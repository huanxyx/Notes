##数字证书原理：

####数字签名
- 在信息的后面加上一段内容，这段内容可以证明信息没有修改过。（通过计算信息内容的Hash值，）

####数字证书的组成
- 证书的发布机构
- 证书的有效期限
- 公钥
- 主题
- 签名所使用的算法
	- 证书发布机构的加密的算法
	- 通过证书发布机构的证书的公钥可以对该证书发布机构发布的证书进行解密。
- 指纹以及指纹算法(通过CA机构的私钥进行加密)
	- 保证证书的完整性，也就是保证证书没有被修改过。

####证书授权机构
- 受信用的第三方机构，承担公钥系统中公钥合法性校验的责任

####证书发布机构的数字证书
- 证书发布机构的数字证书被微软（其他操作系统）安装在操作系统中。

####证书验证过程
- 客户端获取到服务器的证书的时候，从证书中获取发布机构
- 从操作系统中受信任的发布机构的证书中找对应的发布机构的证书。
	- 若是没有找到，则说明证书的发布机构存在问题，意味着证书有可能存在问题。
- 若是存在，则从对应的发布机构证书中获取发布机构的公钥
- 对服务器的证书的指纹和指纹算法进行解密
- 然后通过该指纹算法计算证书的指纹
- 将这个指纹与证书中的指纹对照

####客户端Https访问过程
- **客户端**向服务器发送一个通信请求
- **服务端**发送一个自己的数字证书
- **客户端**通过可信用的CA机构的公钥解密服务器证书的Hash值，然后计算证书内容（明文）的Hash值，进行对照。（若是相同则证明是该CA机构发布的证书）
- **客户端**向服务器发送一个字符串。
- **服务器**对该字符串进行Hash摘要运算，并对该Hash摘要利用私钥加密（密文），发送给客户端
- **客户端**使用服务器证书中的公钥对加密后的Hash摘要（密文）进行解密，然后计算字符串的Hash摘要进行对照。（若是相同则证明是目标服务器）
- **客户端**生成一个对称加密算法和秘钥，并用服务器证书中的公钥对其进行加密，然后发送给服务器。
- **服务器**进行解密，然后之后的通讯都通过该对称加密秘钥进行加密和解密。
	- 发送端每次发送消息的时候，先对信息进行hash运算，然后将信息的内容和hash值通过秘钥加密，再发送给接受方
	- 接受方接收到消息的时候，先用秘钥进行解密，然后计算信息内容的hash值，对照发送端给的hash值，若是不相同则消息发生了篡改


